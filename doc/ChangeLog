#-------------------------------------
# ChangeLog file for package Detector
#-------------------------------------

Package author: Mikhail Dubrovin

Please describe any modifications that you made to the package in the
reverse time order.

Tag: V02-00-47
2022-09-14 Mikhail Dubrovin
- NDArrProducerPrinceton.h, NDArrProducerPnccd.cpp - cosmetic - remove blanks"
- NDArrProducerPnccd.h - get rid of compilation warnings - use Rows, Cols in make_ndarray

Tag: V02-00-46
2022-09-13 Mikhail Dubrovin
modified:
   app/epix10ka_deploy_constants - change filemode to 0o666 from 0o2666, import/use DIR_LOG_AT_START
   app/epix10ka_offset_calibration /
   app/epix10ka_pedestals_calibration /
   app/geometry_deploy_constants
   app/jungfrau_dark_proc - change filemode to 0o666 from 0o2666, import/use DIR_LOG_AT_START
   app/jungfrau_deploy_constants /
   app/jungfrau_gain_constants /
   src/RepoManager.py - change filemode to 0o666 from 0o2666
   src/UtilsDeployConstants.py - add filemode and dirmode to gu.deploy_file
   src/UtilsEpix.py - define CALIB_REPO_EPIX10KA using DIR_ROOT
   src/UtilsEpix10kaCalib.py - change filemode to 0o666 from 0o2666
   src/UtilsGeometryDeploy.py - fix usage of parameter loglev, change filemode to 0o666 from 0o2666
   src/UtilsJungfrau.py - remove option from directory parameter in _find_panel_calib_dir and find_panel_calib_dirs
   src/UtilsJungfrauCalib.py - change filemode to 0o666 from 0o2666, define CALIB_REPO_JUNGFRAU from dir_root.py
   src/dir_root.py - add DIR_ROOT_DATA for dcs

Tag: V02-00-45
2022-08-16 Mikhail Dubrovin
- UtilsCalib.py - add optional parameter umask
- jungfrau_gain_constants - use unified logging approach

Tag: V02-00-44
2022-07-01 Mikhail Dubrovin
- add prefix 0o2000 to all dir/file mode parameter, e.g. 0o777 -> 0o2777
   ../app/deploy_constants
   ../app/epix10ka_deploy_constants
   ../app/epix10ka_offset_calibration
   ../app/epix10ka_pedestals_calibration
   ../app/geometry_deploy_constants
   ../app/jungfrau_dark_proc
   ../app/jungfrau_deploy_constants
   ../app/jungfrau_gain_constants
   ../app/jungfrau_images
   ../app/jungfrau_ndarr_dark_proc
   RepoManager.py
   UtilsCalib.py
   UtilsDeployConstants.py
   UtilsEpix10kaCalib.py
   UtilsGeometryDeploy.py
   UtilsJungfrauCalib.py

Tag: V02-00-43
2022-06-30 Mikhail Dubrovin
 - UtilsGeometryDeploy.py - use correct RAYONIX_PIXEL_SIZE = 44.271 um
 - PyDetectorAccess.py - add protection for substituting
	    correct rayonix pixel size from configuration

Tag: V02-00-42
2022-06-16 Mikhail Dubrovin
test-issues-2022.py - add issue_2022_06_16
app/datinfo - check PY2 or 3 for DICT_NAME_TO_LEVEL, use logmode in det.set_print_bits

Tag: V02-00-41
2022-06-14 Mikhail Dubrovin
modified:
 - app/geometry_deploy_constants - add comment Ex.15
 - examples/test-issues-2022.py - update issue_2022_05_16, add issue_2022_06_14 for rayonix
 - src/PyDetectorAccess.py - add correction of rayonix segment from configuration
 - src/UtilsGeometryDeploy.py - add correction of rayonix segment from configuration

Tag: V02-00-40
2022-06-09 Mikhail Dubrovin
modified:
 - add command app/deploy_constants
 - UtilsCalib.py - in file_name_prefix add/pass **kwa, in find_file_for_timestamp add '.txt'
 - add RepoManager.py, UtilsDeployConstants.py for app/deploy_constants

2022-06-02 Mikhail Dubrovin
modified:
- EventCodeManager.py - fix issue reported by Silke when evt_codes is None
- PyDetector.py - code cleaning

Tag: V02-00-39
2022-05-02 Mikhail Dubrovin
modified:
   examples/test-issues-2022.py - add issue_2022_05_02
   src/AreaDetector.py - path kwargs['rms'] to self.pyda.common_mode_apply(_cmpars, nda, **kwargs),
	use kwargs['mbits'] for calib_jungfrau/epix10ka only
   src/PyDetectorAccess.py - fix positional parameters for pyimgalgos: cm_epix

Tag: V02-00-38
2022-04-28 Mikhail Dubrovin
- modified:
   app/epix10ka_deploy_constants - add boolean parameter -E, or --errskip, change d_logmode to INFO
   app/jungfrau_deploy_constants - add boolean parameter -E, or --errskip
   src/UtilsEpix10kaCalib.py - use parameter errskip add/use method check_exists
   src/UtilsJungfrauCalib.py - use parameter errskip add/use method check_exists
   examples/test-issues-2022.py - in issue_2022_04_26 add Silke's dataset cxilx8720 run6
   src/PyDetectorAccess.py - in get_constants remove void parameter use_repo

2022-04-26 Mikhail Dubrovin
- examples/test-issues-2021.py - correction of comments
- examples/test-issues-2022.py - add issue_2022_04_20, issue_2022_04_26

Tag: V02-00-37
2022-03-28 Mikhail Dubrovin
   app/epix10ka_deploy_constants, epix10ka_offset_calibration, epix10ka_pedestals_calibration
      jungfrau_dark_proc, jungfrau_deploy_constants - add repoman=RepoManager and repoman.save_record_at_start
   app/geometry_deploy_constants
   src/UtilsEpix10kaCalib.py, UtilsJungfrauCalib.py - remove save_log_record_at_start from script algorithm

Tag: V02-00-36
2022-03-24 Mikhail Dubrovin
modified:
   app/geometry_deploy_constants - add command geometry_deploy_constants
   src/UtilsGeometryDeploy.py
   src/UtilsCalib.py - add ave_record_at_start and associated methods to class RepoManager
   src/UtilsEpix10kaCalib.py - code cleaning
   src/UtilsJungfrauCalib.py - code cleaning
   src/UtilsLogging.py - add parameter fmt=None to method init_logger

Tag: V02-00-35
2022-02-25 Mikhail Dubrovin
modified:
   ../app/jungfrau_images - use mask_total in -t14, add -t15 for det.calib with mask_total
   AreaDetector.py - add/use method mask_total in stead of mask_comb
   UtilsEpix10ka.py
   UtilsJungfrau.py

Tag: V02-00-34
2022-02-24 Mikhail Dubrovin
modified:
   app/datinfo - add protection if hasattr('det', 'source')
   app/jungfrau_images - add multiple tests and description of examples in help
   src/AlgoAccess.py - code cleaning
   src/AreaDetector.py - add method mask_v2
   src/UtilsCalib.py - add method info_pixel_status

Tag: V02-00-33
2022-02-15 Mikhail Dubrovin
modified:
   ../app/jungfrau_images - use ArgumentParser as in epix10ka_calib_components
   AreaDetector.py - status_as_mask add/use parameter mstcode=0xffff to select bad bits for mask
   UtilsCalib.py - fix arr_dev_3d = blockf64[:,] - arr_med
   UtilsJungfrau.py - add methods map_gain_range_index, gain_range_maps_jungfrau, event_constants

Tag: V02-00-32
2021-02-11 Mikhail Dubrovin
modified:
   ../app/jungfrau_dark_proc - note that option --upload or -u is deprecated and not used
   ../examples/test-issues-2022.py - add issue_2022_02_09
   UtilsCalib.py - refactoring - in DarkProc add/use parameter datbits, save in block raw data without data bit-mask
   UtilsJungfrau.py - code cleaning - remove blanks
   UtilsJungfrauCalib.py - add/use DarkProcJungfrau derived from DarkProc to define pixels with bad gain mode switch

Tag: V02-00-31
2022-01-25 Mikhail Dubrovin
- app/epix10ka_deploy_constants, epix10ka_pedestals_calibration - replace logging.basicConfig with init_logger
- app/jungfrau_dark_proc, jungfrau_deploy_constants - change dirmode=0o775->0o777, filemode=0o664->0o666
- src/UtilsCalib.py - use os.umask(0o0), change dirmode=0o775->0o777, filemode=0o664->0o666
- src/UtilsEpix10kaCalib.py - use os.umask(0o0), change dirmode=0o775->0o777, filemode=0o664->0o666
- src/UtilsJungfrauCalib.py - change dirmode=0o775->0o777, filemode=0o664->0o666

Tag: V02-00-30
2022-01-06 Mikhail Dubrovin
	modified:   PyDetectorAccess.py - code cleaning - remove blanks and comments
	modified:   ../src/AreaDetector.py - add *psf methods using PSCalib/GeometryAccess -> UtilsPSF
	new file:   test-issues-2022.py - use it as test examples

Tag: V02-00-29
2021-12-10 Mikhail Dubrovin
- app/datinfo for id_jungfrau source -> det.source
- app/epix10ka_pedestals_calibration - code cleaning
- fix issue reported by Silke about file/dir permissions for JF
  - app/jungfrau_dark_proc, jungfrau_deploy_constants
    - add dirmode=0o775, filemode=0o664
  - src/UtilsCalib.py
    - add use mode=0o775, filemode=0o664
    - update class RepoManager
	- explicitly create intermediate rirs and do chmod
    - src/UtilsEpix10kaCalib.py
	- use parameter filemode in method save_log_record_on_start
    - src/UtilsJungfrauCalib.py
	- use parameter filemode in method save_log_record_on_start and uc.RepoManager
- fix jungfrau_dark_proc for 3-calib-cycle file for per-cc per-panel processing
  - app/jungfrau_dark_proc - remove clbdir, add evstep, change d_nrecs1 = 50
  - src/UtilsLogging.py - add %(filename)s to formatter for DEBUG
  - src/UtilsJungfrauCalib.py - use common time stamp for all steps, create dpo for processed steps only
	- use common time-stamps ts_run, ts_now for the dataset
	- create dpo for processed steps only
	- remove terminate_steps from irrelevant places to loop over all steps
	- use dirmode in uc.RepoManager

Tag: V02-00-28
2021-12-02 Mikhail Dubrovin
- app/epix10ka_deploy_constants - code cleaning
- src/UtilsEpix10kaCalib.py - fix bug reported by Silke on 2021-11-29 - dsname should have :dir=..., grab previosly defined run time stamp

Tag: V02-00-27
2021-11-22 Mikhail Dubrovin
- app/epix10ka_deploy_constants src/UtilsEpix10kaCalib.py
  - code cleaning - remove comments and blanks
  - add parameter --runend by Philip and Silke request

2021-11-15 Mikhail Dubrovin
- cosmetic update - remove blanks
  app/jungfrau_dark_proc
  app/jungfrau_ndarr_dark_proc
  src/UtilsJungfrauCalib.py

Tag: V02-00-26
2021-11-05 Mikhail Dubrovin
- src/PyDataAccess.py, src/AreaDetector.py, app/epix10ka_test_calibcycles
	- code cleaning - remove blanks and separators
- examples/test-issues-2021.py - add issue_2021_10-25
- src/UtilsGraphics.py - adopt from lcls2
- app/datinfo - use info_pixel_gain_mode_fractions
- src/UtilsEpix10ka.py
    - use comprehenson lists in info_gain_mode_arrays1, etc.
    - add methods event_constants*, map_gain_range_index, table_nxn_epix10ka_from_ndarr
    - code cleaning
- examples/test-issues-2021.py - add issue_2021_10_27
- app/det_calib_ave_and_max - change printing content
- app/det_ndarr_raw_proc - remove spaces and separators
- add app/det_raw_calib_image - add exit if nargs<3
- app/epix10ka_test_calibcycles - cosmetic update
- app/epix10ka_calib_components - complete replacement using new development from lcls2, add -t 101-103
- src/UtilsCalib.py - add method mean_constrained
- examples/ex_epix10ka_calibrows.py - calibration rows averaging for test purpose
- src/UtilsGraphics.py - add methods plot and axis_plot

Tag: V02-00-25
2021-09-22 Daniel Damiani
- add support for Alvium detector
	modified:   src/DetectorTypes.py
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py

Tag: V02-00-24
2021-08-27 Mikhail Dubrovin
- app/det_calib_ave_and_max - fix issue with CALIBDIR=None

Tag: V02-00-23
2021-07-19 Mikhail Dubrovin
- UtilsEpix10kaCalib.py - fix algorithm for saving pedestals with offsetph

Tag: V02-00-22
2021-07-04 Mikhail Dubrovin
- by Philip request add method save_epix10ka_ctype_in_repo with tests
	new file:   examples/ex_epix10ka_save_ctype_in_repo.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V02-00-21
2021-07-01 Mikhail Dubrovin
- app/datinfo - add printing of event_keys - need it for unknown detector name
- examples/ex_new_dets.py - add example 102 for iStar
- check that support for iStar was added earlier in
   src/DetectorTypes.py
   src/PyDataAccess.py
   src/PyDetectorAccess.py

Tag: V02-00-20
2021-06-11 Mikhail Dubrovin
- app/epix10ka_offset_calibration - change default for d_nperiods=False
- src/UtilsEpix10kaCalib.py - multiple changes
  - changed axis titles - split long name, smaller font
  - saw_edges - change algorithm (old in _v0), np.nonzero(...)[0] -> np.flatnonzero
  - fit - add protection against intensity overflow above 16000 ADU
  - offset_calibration - in accumulation of data add protection for d(fiducials) != 3 between events
  - merge_panel_gain_ranges - by Philip request use pedestals_FL for AHL-L, AML-L

Tag: V02-00-19
2021-05-19 Mikhail Dubrovin
- refactoring in UtilsEpix10kaCalib.py
- GlobalUtils.py - add info_command_line and info_kwargs
  new file:   app/datinfo
  new file:   examples/test_load_npy.py

Tag: V02-00-18
2021-04-30 Mikhail Dubrovin
- src/UtilsEpix10kaCalib.py fix issues with matplotlib move, save plots under <panel-id>/plots (Philip)

Tag: V02-00-17
2021-04-29 Daniel Damiani
- PyDataAccess.py - add support for new ddl config versions for epix10ka

Tag: V02-00-16
2021-04-27 Mikhail Dubrovin
- UtilsJungfrauCalib.py - fix loger.info for missing constants replaced by default

Tag: V02-00-15
2021-04-26 Mikhail Dubrovin
modified:
	UtilsCalib.py - logger.info -> debug
	UtilsJungfrauCalib.py - tune logging messages for production

Tag: V02-00-14
2021-04-23 Mikhail Dubrovin
modified:
   app/jungfrau_dark_proc - clean-up, set correct default parameters
   src/UtilsCalib.py - add more method from UtilsEpix10kaCalib
   src/UtilsEpix10kaCalib.py - move find_file_for_timestamp, calib_group, save_ndarray_in_textfile,
	                       save_2darray_in_textfile to UtilsCalib.py
   src/UtilsJungfrau.py - add shape_from_config_jungfrau
   src/UtilsJungfrauCalib.py - clean-up code for working version
add new:
   app/jungfrau_deploy_constants
   src/UtilsLogging.py - move here initialization of logger

Tag: V02-00-13
2021-04-19 Mikhail Dubrovin
- code refactoring for app/jungfrau_dark_proc
modified:
	app/epix10ka_pedestals_calibration - change format in logging.basicConfig
	examples/test-issues-2021.py - add issue_2021_04_08
	src/GlobalUtils.py - upgrade info_ndarr, print_ndarr
	src/UtilsEpix.py - move out methods set_file_access_mode, create_directory, alias_for_id, id_for_alias
	                   moved to PSCalib.UtilsPanelAlias
	src/UtilsEpix10kaCalib.py - move out methods evaluate_limits, tstamps_run_and_now, tstamp_for_dataset,
	                            xsave_log_record_on_start
	src/UtilsJungfrau.py - cosmetic code cleaning
add new:
	app/jungfrau_dark_proc
	src/UtilsCalib.py
	src/UtilsJungfrauCalib.py

Tag: V02-00-12
2021-03-24 Mikhail Dubrovin
app/det_calib_ave_and_max - fix description in usage
app/epix10ka_images - sage() -> USAGE
examples/test-issues-2021.py - add issue_2021_03_24
UtilsEpix10kaCalib.py - fix finding of the epix10ka gain mode in pvLabels

Tag: V02-00-11
2021-03-22 Mikhail Dubrovin
- UtilsEpix10kaCalib.py - in step_counter use detector name to find pvlbl.value
	- change imported to local STORE,

Tag V02-00-10
2021-03-18 Daniel Damiani
- src/DetectorTypes.py - add support for new BLD, iStar, and QuadAdc
- src/PyDataAccess.py - add support for iStar config
- src/PyDetectorAccess.py - add support for iStar

Tag: V02-00-09
2021-03-18 Mikhail Dubrovin
modified:
   app/jungfrau_images
   examples/test-issues-2021.py - add issue_2021_03_17,18,18B
   ../src/UtilsEpix10ka.py - fix issue with singleton store
   ../src/EventCodeManager.py - add methods event_codes, event_code_list

Tag: V02-00-08
2021-03-01 Mikhail Dubrovin
- for EPIX10KA all 2d arrays are re-shaped to 3d
- examples/test-issues-2021.py - add issue_2021_03_01 from silke
- src/AreaDetector.py - for EPIX10KA all 2d arrays are re-shaped to 3d
- src/UtilsEpix10ka.py

Tag: V02-00-07
2021-03-01 Mikhail Dubrovin
- examples/test-issues-2021.py - add issue_2021_02_23 from cpo

Tag: V02-00-06
2021-02-22 Mikhail Dubrovin
- examples/test-issues-2021.py - add issue_2021_02_22 from Silke & Lennart

Tag: V02-00-05
2021-02-17 Mikhail Dubrovin
- examples/test-issues-2021.py - add issue_2021_02_16 from Silke common mode
- UtilsJungfrau.pyhrows = 256 #512/2 -> float in new compiler

Tag: V02-00-04
2021-02-03 Mikhail Dubrovin
- add issue_2021_02_02 in examples/test-issues-2021.py
- src/UtilsEpix10kaCalib.py - fix issue with new python compiler

Tag: V02-00-03
2021-01-26 Mikhail Dubrovin
- src/UtilsEpix10ka.py fix undefined gr0 - issue reported by Silke

2021-01-14 Mikhail Dubrovin
- fix new c++ compiler minor complains
	modified:   include/NDArrProducerAndor.h
	modified:   src/NDArrProducerAndor.cpp

Tag: V02-00-02
2021-01-14 Mikhail Dubrovin
- updarte and rename examples/test-issues-2021.py

Tag: V02-00-01
2021-01-13 Mikhail Dubrovin
- fix issue with float index, minor refactoring in parameters
	modified:   src/UtilsEpix10ka.py
	new file:   examples/test-2021-01-12-velerio-float-index.py

Tag: V02-00-00 Valerio py2->py3
Tag: V01-02-00 Valerio py2->py3

Tag: V01-01-01
2020-12-11 Mikhail S. Dubrovin
- propagate npix_min=10, apply cm corr by mask only
	modified:   src/UtilsCommonMode.py
	modified:   src/UtilsEpix10ka.py
	modified:   src/UtilsJungfrau.py
	modified:   app/epix10ka_images
	modified:   app/jungfrau_images

Tag: V01-00-99
2020-12-10 Mikhail S. Dubrovin
- implement full scale common mode correction for Jungfrau and epix10ka detectors
	modified:   src/AreaDetector.py
	modified:   src/UtilsCommonMode.py
	modified:   src/UtilsEpix10ka.py
	modified:   src/UtilsJungfrau.py
	modified:   app/det_images
	new file:   app/epix10ka_images
	modified:   examples/ex_epix10ka_cmod.py
	modified:   examples/ex_epix10ka_cmod_direct_test.py
	new file:   examples/ex_epix10ka_config_barebones.py
	modified:   examples/ex_epix10ka_ipython.py
	modified:   examples/ex_jungfrau_images.py
	new file:   examples/test-2020-12-04-iris-polarization-corr.py

Tag: V01-00-98
2020-10-15 Mikhail S. Dubrovin
- app/det_calib_ave_and_max - add calib derectory parameter
- app/det_calib_maxed - deleted

Tag: V01-00-97
2020-10-01 Mikhail S. Dubrovin
- add -G option to plot charge injection graphics for specified pixel
	modified:   app/epix10ka_offset_calibration
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-96
2020-09-22 Mikhail S. Dubrovin
- for Chuck add parameter fract to point_indexes
- add old test*.py to examples
- add app/det_calib_ave_and_max
	modified:   src/AreaDetector.py
	modified:   src/PyDetectorAccess.py
	new file:   app/det_calib_ave_and_max
	new file:   examples/test-2018-06-12-pnccd-xanthe-changed.py
	new file:   examples/test-2018-11-29-epix10ka2m-shapes.py
	new file:   examples/test-2019-04-05-jungfrau-shape.py
	new file:   examples/test-2019-04-15-detector.py
	new file:   examples/test-2020-02-04-philip-makeTuple.py
	new file:   examples/test-2020-08-10-cpo-xcsc00118.py
	new file:   examples/test-2020-08-18-cpo-xpplr8116-r27-py2-py3.py
	new file:   examples/test-2020-08-23-cxic00318-epix10ka2m-mask-chuck-corr.py
	new file:   examples/test-2020-09-18-cpo-meclv8018-epix100a-det-image.py

Tag: V01-00-95
2020-09-18 Mikhail S. Dubrovin
- add app/det_calib_maxed, epix10ka2m_split_calib_for_7nda and cosmetics
	new file:   app/det_calib_maxed
	modified:   app/det_raw_calib_image
	new file:   app/epix10ka2m_split_calib_for_7nda
	deleted:    examples/ex_epix10ka2m_split_calib_for_7nda.py
	modified:   src/GlobalUtils.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-94
2020-09-12 Mikhail S. Dubrovin
- fix option for panel indices in epix10ka_deploy_constants, add new app/det_raw_calib_image
#	new file:   app/det_raw_calib_image
#	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-93
2020-09-11 Mikhail S. Dubrovin
- add option -I in app/epix10ka_deploy_constants
- fix issue to access EPIX100A and EPIX10KA shape from configuration
	modified:   app/epix10ka_deploy_constants
	modified:   app/epix10ka_test_calibcycles
	modified:   src/PyDetectorAccess.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-92
2020-09-02 Mikhail S. Dubrovin
- add default constants for epix10ka and epix10kaquad
	new file:   data/geometry-def-epix10ka.data
	new file:   data/geometry-def-epix10kaquad.data
	modified:   src/PyDetectorAccess.py

Tag: V01-00-91
2020-08-25 Mikhail S. Dubrovin
- add parameter cframe to coords_xyz, add a few default geometry files, update examples
	new file:   data/geometry-def-epix10ka2m.data
	new file:   data/geometry-def-jungfrau05m.data
	new file:   data/geometry-def-jungfrau1m.data
	new file:   data/geometry-def-jungfrau4m.data
	modified:   examples/ex_epix10ka_images.py
	new file:   examples/test-2020-08-25-epix10ka-panel-flatness-optmet.py
	new file:   examples/test-2020-08-25-epix10ka2m-marc.py
	new file:   examples/test-lab-pixel-coordinates-on-psana-frame-image.py
	modified:   src/AreaDetector.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-90
2020-08-25 Mikhail S. Dubrovin
- keep polishing epix10ka2m scripts
  - deploy_constants
    - to prevent warnings do not open non-existent files for rms and status in AML-L and AHL-L
    - check that per-panel file extension is .dat
    - gainci normalize on single factor each of switching modes AML-L, AHL
  - offset_calibration
    - TODO: check c-i calibcycles by numberorder with metadata
- add a couple of examples
	new file:   examples/ex_epix10ka2m_replace_offset_calib_zeros.py
	new file:   examples/ex_epix10ka2m_split_calib_for_7nda.py
	modified:   src/UtilsEpix10kaCalib.py
	modified:   src/UtilsJungfrau.py

Tag: V01-00-89
2020-08-21 Mikhail S. Dubrovin
- add protection in charge-injection fit, add optional saving chi2/dof
	modified:   app/epix10ka_offset_calibration
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-88
2020-08-15 Mikhail S. Dubrovin
- update UtilsEpix10kaCalib.py

Tag: V01-00-87 ???

Tag: V01-00-86
2020-08-08 Mikhail S. Dubrovin
- update epix10ka_* scripts
  - in epix10ka_offset_calibration, epix10ka_pedestals_calibration - check if gain mode in meta coincides with config
  - in epix10ka_deploy_constants - fix default for gainci
	renamed:    app/epix10ka_ndarr_dark_proc -> app/deprecated_epix10ka_ndarr_dark_proc
	modified:   app/epix10ka_deploy_constants
	modified:   app/epix10ka_offset_calibration
	modified:   app/epix10ka_pedestals_calibration
	renamed:    examples/ex_epix10ka2m_test_calibcycles.py -> app/epix10ka_test_calibcycles
	modified:   examples/ex_epix10ka_images.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-85
2020-08-04 Mikhail S. Dubrovin
- use default and average ADU/keV gain factors for epix10ka
	modified:   ../app/epix10ka_deploy_constants
	modified:   UtilsEpix10kaCalib.py

Tag: V01-00-84
2020-07-24 Mikhail S. Dubrovin
- fix indexing issue in algorithm
	modified:   ../app/epix10ka_offset_calibration
	modified:   UtilsEpix10kaCalib.py

Tag: V01-00-83
2020-07-14 Mikhail S. Dubrovin
- fix nrec counter limit, add ccmax for pedestal calibration
	modified:   ../app/epix10ka_pedestals_calibration
	modified:   UtilsEpix10kaCalib.py
- extend examples:
	modified:   ../examples/ex_jungfrau_images.py
	new file:   ../examples/test-2020-07-02-cspad-cm-issue-silke-aviad.py

Tag: V01-00-82
2020-07-06 crisvam
- fix for case where epics alias name may be present even when pv is mi?

Tag: V01-00-81
2020-06-23 Mikhail S. Dubrovin
- epix10ka_offset_calibration - new period-independent charge-injection fit and ped_L formulae from Gabriel
	modified:   ../app/epix10ka_offset_calibration
	new file:   ../examples/test_load_npz.py
	modified:   UtilsEpix10kaCalib.py

### Not tagged yet
2020-06-18 Mikhail S. Dubrovin
- work on epix10ka_offset_calibration. Pulser period-independent fit is done.
  TODO: - apply charge injection fit results to pedestal calibration,
	- code polishing
	modified:   ../app/epix10ka_offset_calibration
	modified:   ../examples/ex_epix10ka2m_test_calibcycles.py
	modified:   UtilsEpix10kaCalib.py

### Not tagged yet
2020-06-10 Mikhail S. Dubrovin
  - add plot for charge injection raw intensity vs event to clarify problem with fit
	modified:   app/epix10ka_offset_calibration
	modified:   examples/ex_epix10ka2m_test_calibcycles.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-80
2020-06-08 Mikhail S. Dubrovin
- speed-up common mode correction algorithms common_mode_rows, common_mode_cols
modified:   examples/ex_epix10ka2m_test_calibcycles.py
modified:   examples/ex_epix10ka_cmod.py
modified:   src/UtilsCommonMode.py
modified:   src/UtilsEpix10ka.py

Tag: V01-00-79
2020-06-03 Mikhail S. Dubrovin
- add -R option and diagnostics (plot) to app/epix10ka_offset_calibration
- add ../examples/ex_epix10ka*
- add common-mode correction to epix10ka, det.calib(evt, cmpars=(7,2,100))
- pass raw data as external parameter, det.calib(evt, nda_raw=raw)
	modified:   ../app/epix10ka_offset_calibration
	new file:   ../examples/ex_epix10ka2m_test_calibcycles.py
	new file:   ../examples/ex_epix10ka_cmod.py
	modified:   AreaDetector.py
	modified:   UtilsEpix10ka.py

Tag: V01-00-78
2020-02-25 Mikhail S. Dubrovin
- app/jungfrau_gain_constants contract intermediate file name (Philip)

Tag: V01-00-77
2020-01-29 Mikhail S. Dubrovin
- In UtilsJungfrau.calib_jungfrau add optional parameter nda_raw=None to bypass det.raw (for Silke)

Tag: V01-00-76
2020-01-21 Mikhail S. Dubrovin
- update examples/ex_jungfrau_images.py for pixel numeration demo

Tag: V01-00-75
2020-01-15 Mikhail S. Dubrovin
- update Detector/examples for Jungfrau4M

Tag: V01-00-74
2019-04-16 Mikhail S. Dubrovin
- integrate AreaDetectorCompound under Detector
- use (str) or (list) input parameter 'compound det1 det2', ['det1', 'det2']
modified:   examples/ex_AreaDetectorCompound.py
modified:   src/AreaDetector.py
modified:   src/AreaDetectorCompound.py
modified:   src/PyDetector.py
modified:   src/UtilsJungfrau.py

Tag: V01-00-73
2019-04-08 Mikhail S. Dubrovin
add method examples/ex_AreaDetectorCompound.py

Tag: V01-00-72
2019-04-05 Mikhail S. Dubrovin
add methods
  - indexes_xy_at_z in AreaDetector and PyDetectorAccess
  - AreaDetectorCompaund.add_method_double_nda, image_at_z

Tag: V01-00-71
2019-04-05 Mikhail S. Dubrovin
- add AreaDetectorCompaund.py
- minor tuning of examples

Tag: V01-00-68, 69, 70
2019-03-07 chrisvam
- fixed something in PyDetector.py

Tag: V01-00-67
2018-12-14 Mikhail S. Dubrovin
- UtilsEpix10kaCalib.pedestals_calibration - accseleration
  - accumulate ~1024 data in block once per entire frame (16,352,384)
    then process them for all frames
  - add option idx to calibrate single panel (10-20sec per panel)
  - add convenience methods for information about gain mode map and statistics
- UtilsEpix10kaCalib.deploy_constants - add parameter --proc='psrg'
	to control deployment types.
- UtilsEpix10ka - rename auto-switch gain modes for data bit14
modified: app/epix10ka_deploy_constants
	  app/epix10ka_offset_calibration
	  app/epix10ka_pedestals_calibration
	  doc/ChangeLog
	  examples/ex_epix10ka_images.py
	  src/UtilsEpix10ka.py
	  src/UtilsEpix10kaCalib.py

Tag: V01-00-66
2018-12-12 Mikhail S. Dubrovin
- UtilsEpix10kaCalib - fix issue with os.chmod for existing file created by other user

Tag: V01-00-65
2018-12-12 Chris
- default to only return eventcodes that match this fiducial

Tag: V01-00-64
2018-12-11 Mikhail S. Dubrovin
- add epix10ka in mask_geo, status_as_mask and mask_geo, UtilsEpix10kaCalib.deploy_constants add deployment for gainci
modified:   app/epix10ka_deploy_constants
	    examples/ex_epix10ka_images.py
	    src/AreaDetector.py
	    src/PyDataAccess.py
	    src/PyDetectorAccess.py
	    src/UtilsEpix10kaCalib.py

Tag: V01-00-63
2018-12-06 Mikhail S. Dubrovin
- old version of the fit is restored, in epix10ka_pedestals_calibration add parameters ccnum for calybcycle selection
 	modified:   app/epix10ka_deploy_constants
 	modified:   app/epix10ka_offset_calibration
 	modified:   app/epix10ka_pedestals_calibration
 	modified:   src/UtilsEpix10kaCalib.py

Committed w/o tag
2018-12-04 Mikhail S. Dubrovin
- Gabriel fixes fit
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-62
2018-12-04 Mikhail S. Dubrovin
- apply gated algorithm to pedestals, add rms and status, save charge injected gains per panel
 	modified:   src/UtilsEpix10kaCalib.py
 	modified:   app/epix10ka_deploy_constants
 	modified:   app/epix10ka_pedestals_calibration
 	modified:   examples/ex_rayonix_config_pars.py

Committed w/o tag
2018-11-30 Mikhail S. Dubrovin
- src/UtilsEpix10kaCalib.py fix nrec -= 1 at the end of two cycles, invert GAIN_FACTOR_DEF

Tag: V01-00-61
2018-11-30 Mikhail S. Dubrovin
- fix multiple issues for intensity calibration of epix10ka2m
  - fix log on start record crash for missing SIT_RELEASE
  - in epix10ka_deploy_constants extend -t parameter for run number
  - use default gain factors 1/3/100 H/M/L gain modes, respectively
  - cosmetic improvements of output in debug mode
	modified:   app/epix10ka_deploy_constants
	modified:   app/epix10ka_offset_calibration
	modified:   app/epix10ka_pedestals_calibration
	modified:   doc/ChangeLog
	modified:   src/UtilsEpix.py
	modified:   src/UtilsEpix10ka.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-60
2018-11-29 Mikhail S. Dubrovin
- fix multiple issues for intensity calibration of epix10ka2m
  - apply mask 0x3ff to raw at pedestals evaluation
  - return det.calib dtype=np.float32() it was dtype=object
  - return det.pedestals and det.gain shape = (7,16,352,384) was (112,352,384)
  - return det.coords_x shape = (16,352,384) was (1,4,4,352,384)
  - set directory mode to 0777, file mode 0666
  - fix numerous cosmetic issues
	modified:   examples/ex_new_dets.py
	modified:   src/AreaDetector.py
	modified:   src/PyDetectorAccess.py
	modified:   src/UtilsEpix.py
	modified:   src/UtilsEpix10ka.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-59
2018-11-28 Mikhail S. Dubrovin
- update for app/epix10ka_offset_calibration - fix problem in fit
	modified:   app/epix10ka_offset_calibration
	modified:   examples/ex_epix10ka2m_ipython.py
	modified:   src/UtilsEpix10kaCalib.py

Committed w/o tag
2018-11-27 Mikhail S. Dubrovin
- update for app/epix10ka_pedestals_calibration - multipanel version
	modified:   app/epix10ka_deploy_constants
	modified:   app/epix10ka_pedestals_calibration
	modified:   src/UtilsEpix10kaCalib.py

Committed w/o tag
2018-11-27 Mikhail S. Dubrovin
- update for app/epix10ka_deploy_constants
	modified:   app/epix10ka_deploy_constants
	modified:   src/UtilsEpix.py
	modified:   src/UtilsEpix10kaCalib.py

Committed w/o tag to let Chris work on problem with fitting.
2018-11-26 Mikhail S. Dubrovin
- work on epix10ka2m calibration in progress
 	modified:   app/epix10ka_deploy_constants
 	modified:   app/epix10ka_id
 	modified:   app/epix10ka_offset_calibration
 	modified:   examples/ex_epix10ka2m_config.py
 	modified:   examples/ex_epix10ka2m_ipython.py
 	modified:   examples/ex_epix10ka_images.py
 	modified:   examples/ex_new_dets.py
 	modified:   examples/ex_source_dsname.py
 	modified:   src/UtilsEpix.py
 	modified:   src/UtilsEpix10ka.py
 	modified:   src/UtilsEpix10ka2M.py
 	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-58
2018-11-16 Mikhail S. Dubrovin
- restore removed import
- fix pedestals averaging in UtilsEpix10kaCalib.py
	new file:   examples/ex_epix10ka_plot_in_evloop.py
	modified:   examples/ex_new_dets.py
	modified:   examples/ex_source_dsname.py
	modified:   src/UtilsEpix.py
	modified:   src/UtilsEpix10ka.py
	modified:   src/UtilsEpix10kaCalib.py

Tag: V01-00-57
2018-11-14 Mikhail S. Dubrovin
- implement calib_epix10ka supporting composite detectors epix10ka2m and epix10kaquad
	modified:   app/epix10ka_deploy_constants
	modified:   app/epix10ka_offset_calibration
	modified:   app/epix10ka_pedestals_calibration
	new file:   app/epix10kaquad_produce_fake_constants
	new file:   examples/ex_epix10ka2m_config.py
	modified:   examples/ex_epix10ka2m_keys.py
	new file:   examples/ex_epix10kaquad_config.py
	new file:   examples/ex_epix10kaquad_ipython.py
	modified:   examples/ex_new_dets.py
	new file:   examples/test_epix10kaquad_config.py
	modified:   src/AreaDetector.py
	modified:   src/DetectorTypes.py
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py
	modified:   src/UtilsEpix.py
	renamed:    src/UtilsEpix.py -> src/UtilsEpix10ka.py
	new file:   src/UtilsEpix10ka2M.py
	renamed:    src/UtilsEpix10ka.py -> src/UtilsEpix10kaCalib.py

Tag: V01-00-56
2018-10-30 Mikhail S. Dubrovin
- PyDetectorAccess:
  Rayonix.ConfigV2 updated by Dan in ana-1.3.73
  - get rayonix shape from cfg.hight() and cfg.width()
	modified:   src/DetectorTypes.py
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py
  + update examples

Tag: V01-00-55
2018-10-15 Mikhail S. Dubrovin
- add patch in returning shape for Rayonix detector, begin add stuff for epix10ka2m
	modified:   examples/ex_all_dets.py
	new file:   examples/ex_epix10ka2m_ipython.py
	new file:   examples/ex_epix10ka2m_keys.py
	modified:   examples/ex_jungfrau_images.py
	modified:   examples/ex_pnccd_plot_in_evloop.py
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-54
2018-09-26 Mikhail S. Dubrovin
- AreaDetector.common_mode_apply
  - turn off common mode correction for algorithm #0
- update examples for uxi and pixis
	modified:   examples/ex_new_dets.py
	modified:   examples/ex_pixis.py
	modified:   examples/ex_source_dsname.py
	modified:   examples/ex_uxi.py
	modified:   src/AreaDetector.py

Tag: V01-00-53
2018-09-25 Mikhail S. Dubrovin
- add uxi and pixis
	new file:   app/epix10ka_id
	modified:   examples/ex_jungfrau_get_id.py
	new file:   examples/ex_pixis.py
	new file:   examples/ex_pixis_ipython.py
	new file:   examples/ex_uxi.py
	new file:   examples/ex_uxi_ipython.py
	modified:   src/DetectorTypes.py
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-52
2018-09-25 Dan ???

Tag: V01-00-51
2018-09-14 Mikhail S. Dubrovin
- update epix10ka calibration scripts - 1st production version
	modified:   src/AreaDetector.py
	modified:   src/UtilsEpix.py
	modified:   src/UtilsEpix10ka.py

Tag: V01-00-50
2018-09-12 Mikhail S. Dubrovin
- update epix10ka calibration scripts
	new file:   app/epix10ka_deploy_constants
	modified:   app/epix10ka_offset_calibration
	modified:   app/epix10ka_pedestals_calibration
	modified:   src/GlobalUtils.py
	modified:   src/UtilsEpix.py
	modified:   src/UtilsEpix10ka.py

Tag: V01-00-49
2018-09-07 Mikhail S. Dubrovin
- add epix10ka calibration scripts
	new file:   app/epix10ka_offset_calibration
	new file:   app/epix10ka_pedestals_calibration
	new file:   examples/test-2018-09-07-epix-philip.py
	modified:   src/UtilsEpix.py
	new file:   src/UtilsEpix10ka.py

Tag: V01-00-47,48 - ???

Tag: V01-00-46
2018-07-05 Mikhail S. Dubrovin
- add support for epix10ka constants, det.calib etc.
	modified:   doc/ChangeLog
	modified:   examples/ex_epix10ka_config.py
	modified:   examples/ex_epix10ka_det.py
	modified:   examples/ex_epix10ka_images.py
	new file:   examples/ex_epix10ka_merge_constants.py
	modified:   examples/ex_pnccd_plot_in_evloop.py
	modified:   examples/ex_save_mec_cspad2x2_imges_in_tiff.py
	modified:   examples/ex_save_mec_cspad_quad_imges_in_tiff.py
	modified:   src/AreaDetector.py
	modified:   src/PyDataAccess.py
	modified:   src/UtilsEpix.py

Tag: V01-00-45
2018-06-18 Mikhail S. Dubrovin
- common_mode_apply - add option to use default calib file parameters for cm algorithms 6(epix) and 8(pnccd)

Tag: V01-00-44
2018-06-05 Mikhail S. Dubrovin
- add app/dump_detector_data to save area detector data in files - tmp for lcls2
- add old test examples as examples/test-YYYY-MM-DD-*.py

Tag: V01-00-43
2018-05-07 Mikhail S. Dubrovin
- update examples for jungfrau
	modified:   app/jungfrau_gain_constants
	modified:   examples/ex_epix10ka_det.py
	modified:   examples/ex_jungfrau_det.py
	modified:   src/UtilsJungfrau.py

Tag: V01-00-42
2018-05-04 Mikhail S. Dubrovin
- app/jungfrau_gain_constants - add file deployment and logger
	modified:   app/jungfrau_gain_constants
	modified:   src/UtilsJungfrau.py

Tag: V01-00-41
2018-05-01 Mikhail S. Dubrovin
- add app/jungfrau_gain_constants for merging jungfrau panel constants
	new file:   app/jungfrau_gain_constants
	modified:   app/jungfrau_id
	modified:   src/GlobalUtils.py
	modified:   src/UtilsJungfrau.py
	new file:   src/jungfrau_datasets.py

Tag: V01-00-40
2018-04-19 Mikhail S. Dubrovin
- add support for jungfrau Id from config object
	new file:   app/find_detector_runs
	new file:   app/jungfrau_id
	new file:   examples/ex_jungfrau_get_id.py
	modified:   examples/ex_jungfrau_ipython.py
	modified:   examples/ex_source_dsname.py
	modified:   src/PyDataAccess.py
	modified:   src/UtilsJungfrau.py

Tag: V01-00-39
2018-04-09 Mikhail S. Dubrovin
- UtilsJungfrau.calib_jungfrau - add protection for raw and pedestals if None

Tag: V01-00-38
2018-03-19 Mikhail S. Dubrovin
- AreaDetector - evaluate image for (2-d) JUNGFRAU because of gaps in segment geometry.

Tag: V01-00-37
2018-02-27 Mikhail S. Dubrovin
- begin adding support for epix10ka PyDataAccess, UtilsEpix and examples/ex_epix10ka *
- fix epix geometry access issue - PyDetectorAccess - for geometry constants check repo directory only

Tag: V01-00-36
2018-02-01 Mikhail S. Dubrovin
- pnccd common mode - evaluate cm correction for masked pixels, apply for all in group
	modified:   examples/ex_pnccd_plot_in_evloop.py
	modified:   src/UtilsCommonMode.py

Tag: V01-00-35
2018-01-31 Mikhail S. Dubrovin
- refactor Utils, add new pnccd cm correction in det interface
	modified:   examples/ex_pnccd_plot_in_evloop.py
	modified:   src/AreaDetector.py
	modified:   src/PyDetectorAccess.py
	new file:   src/UtilsCommonMode.py
	modified:   src/UtilsJungfrau.py
	modified:   src/UtilsPNCCD.py

2018-01-30 Mikhail S. Dubrovin
- comment print in UtilsJungfrau.py

Tag: V01-00-34
2018-01-30 Mikhail S. Dubrovin
- fix numpy indexing in UtilsJungfrau.py, add UtilsPNCCD.py, update ex_pnccd_plot_in_evloop.py

Tag: V01-00-33
???

Tag: V01-00-32
2017-12-11 Daniel Damiani
- DetectorTypes.py - add new BLD for MEC analog input to bld_info

Tag: V01-00-31
2017-12-11 Mikhail S. Dubrovin
- PyDetector.DetInfo - fix bug in regular expression pattern and re-definition global var dt

2017-12-07 Mikhail S. Dubrovin
- modified: examples/ex_epix10ka.py

Tag: V01-00-30
2017-12-06 Mikhail S. Dubrovin
- add support for epix10ka
	new file:   ex_epix10ka.py
	new file:   ex_epix10ka_ipython.py
	modified:   ../src/DetectorTypes.py
	modified:   ../src/PyDataAccess.py
	modified:   ../src/PyDetectorAccess.py

2017-12-04 Mikhail S. Dubrovin
- add tname='5' in ex_jungfrau_images.py

Tag: V01-00-29
2017-11-29 Mikhail S. Dubrovin
- UtilsJungfrau - fix common mode correction if all pixels in row/col masked.

2017-11-28 Mikhail S. Dubrovin
- add a couple of examples ex_hdf5_*

2017-11-20 Mikhail S. Dubrovin
- add UtilsJungfrau in doc/web/index.rst

Tag: V01-00-28
2017-11-09 Mikhail S. Dubrovin
- PyDataAccess.py - add Jungfrau.ConfigV3
- add example examples/ex_pnccd_plot_in_evloop.py

Tag: V01-00-27
2017-11-03 Daniel Damiani
- Support for ControlsCamera type added to Detector interface
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-26
2017-10-27 Mikhail S. Dubrovin
- UtilsJungfrau - change formulae of intensity correction for constants provided by PSI and Philip
- add ex_jungfrau_images.py, ex_jungfrau_merge_constants.py

Tag: V01-00-25
2017-10-26 Mikhail S. Dubrovin
- PyDataAccess.py - add Jungfrau.ConfigV2 and ElementV2, update examples for 1M detector

Tag: V01-00-24
2017-10-20 Mikhail S. Dubrovin
- improve app/det_ndarr_data_status, add src/EventCodeManager.py
- mark module titles for sphinx doc

Tag: V01-00-23
2017-10-19 Mikhail S. Dubrovin
- add app/det_ndarr_data_status

Tag: V01-00-22
2017-10-13 Mikhail S. Dubrovin
- Jungfrau - add real segment geometry and all masks
	modified:   app/jungfrau_ndarr_dark_proc
	modified:   examples/ex_all_dets.py
	modified:   examples/ex_jungfrau_det.py
	modified:   examples/ex_jungfrau_ipython.py
	modified:   examples/ex_jungfrau_raw_plot.py
	modified:   examples/ex_new_dets.py
	modified:   examples/ex_source_dsname.py
	modified:   src/AreaDetector.py
	modified:   src/PyDetectorAccess.py
	modified:   src/UtilsJungfrau.py

Tag: V01-00-21
2017-10-10 Mikhail S. Dubrovin
- add stuff for Jungfrau in AreaDetector, GlobalUtils, PyDetectorAccess, UtilsJungfrau
- update examples

Tag: V01-00-20
2017-10-02 Mikhail S. Dubrovin
- move methods from app/jungfrau_ndarr_dark_proc to PyDataAccess and PSCalib.GlobalUtils

Tag: V01-00-19
2017-09-27 Mikhail S. Dubrovin
- app/jungfrau_ndarr_dark_proc - add file deployment and loging main messages

Tag: V01-00-18
2017-09-21 Mikhail S. Dubrovin
Recover files lost since Tag: V01-00-14:
	new file:   data/geometry-def-cspad.data
	new file:   data/geometry-def-cspad2x2.data
	new file:   data/geometry-def-pnccd.data
	modified:   doc/ChangeLog
	modified:   doc/web/Makefile
	modified:   doc/web/conf.py
	modified:   doc/web/index.rst
	modified:   examples/ex_all_dets.py
	new file:   examples/ex_gain_meclp5415.py
	new file:   examples/ex_get_calib_constants.py
	modified:   examples/ex_new_dets.py
	new file:   examples/ex_template.py
	new file:   examples/ex_time_from_env.py
	modified:   src/AreaDetector.py
	modified:   src/GlobalUtils.py
	modified:   src/PyDetector.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-17
chrisvam change xcs-dio bld to be ipimb

Tag: V01-00-16
chrisvam update image doc string

# Tag: V01-00-15
#  - AreaDetector, PyDetectorAccess - use env_time, add examples, add more default geometries

==========================================================
HERE happens mess with tag between my and Dan's (non-updated code) commit.
My changes has been losed... recovered in Tag: V01-00-18
==========================================================

Tag: V01-00-14
2017-09-01 Daniel Damiani
- Add new BLD to src/DetectorTypes.py.

Tag: V01-00-14
2017-09-01 Mikhail S. Dubrovin
- AreaDetector, PyDetectorAccess - use env_time, add examples, add more default geometries (tilted)

	new file:   data/geometry-def-cspad.data
	new file:   data/geometry-def-cspad2x2.data
	new file:   data/geometry-def-pnccd.data
	modified:   doc/ChangeLog
	modified:   doc/web/Makefile
	modified:   doc/web/conf.py
	modified:   doc/web/index.rst
	modified:   examples/ex_all_dets.py
	new file:   examples/ex_gain_meclp5415.py
	modified:   examples/ex_new_dets.py
	new file:   examples/ex_time_from_env.py
	modified:   src/AreaDetector.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-13
2017-08-25 Mikhail S. Dubrovin
- Add sphinx documentation on gh-pages.

Tag: V01-00-12
- ???

Tag: V01-00-11
2017-07-10 Mikhail S. Dubrovin
- AreaDetector.photons - add protection, returns None if data if calibrated data is missing.

Tag: V01-00-10
2017-07-05 Mikhail S. Dubrovin
- add app/jungfrau_ndarr_dark_proc

Tag: V01-00-09
2017-06-30 Mikhail S. Dubrovin
- PyDetectorAccess - fix set_print_bits to propagate pbits to self.cpst and self.geo objects

Tag: V01-00-08
2017-06-19 Mikhail S. Dubrovin
- AreaDetector.py - apply gainmask to CSPAD only

Tag: V01-00-07
2017-06-16 Mikhail S. Dubrovin
- add app/jungfrau_ndarr_dark_proc - this version saves separate files for 3 gain modes

Tag: V01-00-06
2017-06-14 Mikhail S. Dubrovin
- fix a few ndarray deprecared indexing problems
	modified:   include/NDArrProducerAndor.h
	modified:   include/NDArrProducerCSPAD.h
	modified:   src/NDArrProducerAndor.cpp

Tag: V01-00-05
2017-06-13 Mikhail S. Dubrovin
- add support for new detector Zyla
	modified:   examples/ex_all_dets.py
	modified:   examples/ex_new_dets.py
	modified:   examples/ex_source_dsname.py
	modified:   src/DetectorTypes.py
	modified:   src/PyDataAccess.py
	modified:   src/PyDetectorAccess.py

Tag: V01-00-04
2017-05-19 Mikhail S. Dubrovin
- add parameter thr_fraction=0.9 to AreaDetector.photons method

Tag: V01-00-03
Who, when and what ???

Tag: V01-00-02
Who, when and what ???

Tag: V01-00-01
2017-04-17 Mikhail S. Dubrovin
- switch to github, det_ndarr_raw_proc - fix inconsistent dtypes in numpy operations

Tag: V00-04-14
2017-01-04 Mikhail S. Dubrovin
- update ex_new_dets.py, ex_source_dsname.py for jungfrau

Tag: V00-04-13
2016-12-20 Christopher O'Grady
- Add jungfrau

Tag: V00-04-12
2016-12-12 TJ and Chris
- thisFiducialOnly to this_fiducial_only

Tag: V00-04-11
2016-12-12 Christopher O'Grady
- add support to not crash when detector is missing

Tag: V00-04-10
2016-12-09 Jacob Scott and Christopher O'Grady
- in common mode test, set parameters to nominal default values,
  since test data has them over-ridden by calib-dir values.

Tag: V00-04-09
2016-12-09 Jacob Scott and Christopher O'Grady
- add test in detectortest for cspad common mode

Tag: V00-04-08
2016-12-9 David Schneider
- add HX2-BEAMMON-01 to detector xface for pdsdata 8.6.19

Tag: V00-04-07
2016-12-08 Mikhail S. Dubrovin
- eliminate printout from DCStore

Tag: V00-04-06
2016-12-07 Jacob Scott and Christopher O'Grady
- add support for calling common mode algorithm cm_epix.py in PyDetectorAccess.py and AreaDetector.py

Tag: V00-04-05
2016-12-05 Christopher O'Grady
- add new flag for evr eventCodes method that allows returning of only
  eventcodes that were sent on precisely this fiducial

Tag: V00-04-04
2016-11-22 Mikhail S. Dubrovin
- add fallback support for geometry from DCS
  - AreaDetector - in all geometry methods pass par to self.pyda object
  - PyDetectorAccess - move part of geoaccess to geoaccess_calib, add geoaccess_dcs

Tag: V00-04-03
2016-11-17 Mikhail S. Dubrovin
- add ex_cspad_common_mode.py
- AreaDetector.py
  - pass par/evt in stead of rnum to get constants from calib store
  - improve self doc
- PyDetectorAccess.py - switch to using	cps.CreateForEvtEnv for DCS fallback

Tag: V00-04-02
2016-11-14 Christopher O'Grady
- Add new SXR-AIN-01 bld.

Tag: V00-04-01
2016-11-04 Christopher O'Grady
- Add new ControlsCamera area detector to Detector xface

Tag: V00-04-00
2016-10-14 Christopher O'Grady
- rename XCS-BEAMMON-01 bld name to MFX-BEAMMON-01 as per Dan Damiani.

Tag: V00-03-98
2016-10-13 Mikhail S. Dubrovin
- app/det_ndarr_raw_proc - add protection in summary - do not save results for 0 found events.

Tag: V00-03-97
2016-09-07 Mikhail S. Dubrovin
- PyDetectorAccess._shaped_array_ - by cpo request return array as is if its shape differs from config.

Tag: V00-03-96
2016-09-02 Mikhail S. Dubrovin
- PyDetectorAccess._shaped_array_ - fix n-dimensional shape returned by natural geometry to config shape (PSAS-139).

Tag: V00-03-95
2016-09-02 Mikhail S. Dubrovin
- AreaDetector, PyDetectorAccess - retrieve shape from env.configStore() object, and as a fallback from calib store (PSAS-139).
- size and ndim are retrieved from shape in PyDetectorAccess.
- update/fix datasets in examples.
M/A     examples/ex*
M       src/AreaDetector.py
M       src/PyDataAccess.py
M       src/PyDetectorAccess.py

Tag: V00-03-94
2016-08-30 Mikhail S. Dubrovin
- AreaDetector.py, PyDetectorAccess.py - add method gain_mask_non_zero, extending features of gain_mask

Tag: V00-03-93
2016-08-30 Mikhail S. Dubrovin
- app/det_ndarr_raw_proc - restrict a number of info messages with list of event codes by 20.

Tag: V00-03-92
2016-08-29 Mikhail S. Dubrovin
- app/det_ndarr_raw_proc - add option -c and class EventCodeManager (PSAS-139)

Tag: V00-03-91
2016-08-08 Mikhail S. Dubrovin
- AreaDetector.py, PyDetectorAccess.py - add method shape_config, update examples (PSAS-139)

Tag: V00-03-90
2016-08-05 Mikhail S. Dubrovin
- AreaDetector.py add method photons(.), update self-doc and ex_all_dets.py (PSAS-139)

Tag: V00-03-89
2016-07-28 Mikhail S. Dubrovin
- app/det_ndarr_raw_proc - add protection if det.raw is None

Tag: V00-03-88
2016-07-28 Mikhail S. Dubrovin
- in PyDetectorAccess.py add shape_config_cspad and expyda_cspad_shape.py

Tag: V00-03-87
2016-07-18 Christopher O'Grady
Fix bug where det.calib() was not checked early enough for None

Tag: V00-03-86
2016-07-11 Mikhail S. Dubrovin
- PyDetectorAccess - return all geometry arrays through _shaped_geo_array, force EPIX100A shape=(704, 768) (PSAS-139)
- ex_all_dets.py - use det.image for 2-d epix100 array

Tag: V00-03-85
2016-07-05 Mikhail S. Dubrovin
- det.ndarray_from_image - do not modify input array, return its re-shaped copy

Tag: V00-03-84
2016-07-05 Mikhail S. Dubrovin
- det.ndarray_from_image - return 3d array for 2d detectors if geometry is missing but do_reshape_2d_to_3d is set

Tag: V00-03-83
2016-07-05 Mikhail S. Dubrovin
- det.calib - returns modifiable array in case of returning raw (const) data

Tag: V00-03-82
2016-07-05 Mikhail S. Dubrovin
- reshape Epix100 from (704, 768) to (1, 704, 768) if flag is set

Tag: V00-03-81
2016-07-01 Mikhail S. Dubrovin
- force det.image to return 2-d even for do_reshape_2d_to_3d
- app/det_ndarr_raw_proc - upgrade for intensity auto-limits, options -U,D

Tag: V00-03-80
2016-06-30 Mikhail S. Dubrovin
- update documentation for det.calib for two gain corrections and returning raw (PSAS-139)
- add method do_reshape_2d_to_3d and apply it in _shaped_array_
- update examples
M       examples/ex_all_dets.py
M       src/AreaDetector.py
M       src/PyDetectorAccess.py

Tag: V00-03-79
2016-06-25 Mikhail S. Dubrovin
- AreaDetector.py - det.image returns 2-d arrays w/o geometry (PSAS-139)
- add examples/ex_opal.py

Tag: V00-03-78
2016-06-24 Mikhail S. Dubrovin
- add examples/ex_epix100_cmod.py update ex_cspad_gain_mask.py

Tag: V00-03-77
2016-06-24 Mikhail S. Dubrovin
- Add gain factor and gain_mask in det.calib method (PSAS-139)
M       src/AreaDetector.py
M       src/PyDetectorAccess.py

Tag: V00-03-76
2016-06-21 Mikhail S. Dubrovin
- Add three new parameters to the command line algorithm of Detector.app.det_ndarr_raw_proc (PSAS-6)

Tag: V00-03-75
2016-06-16 Mikhail S. Dubrovin
- PyDetectorAccess.load_txtnda - reshape to det.shape() if possible (PSAS-139)
- add ex_cspad_z_position.py

Tag: V00-03-74
2016-06-15 Christopher O'Grady
- Add Detector support for two new MFX Pims that read out with the
  BldDataSpectrometer data type.

Tag: V00-03-73
2016-06-14 Mikhail S. Dubrovin
- AreaDetector.common_mode_correction - do not modify input nda.

Tag: V00-03-72
2016-06-14 Mikhail S. Dubrovin
- AreaDetector.py and PyDetectorAccess.py - change all mask dtype to uint8 (PSAS-139)
- fix typo in app/det_ndarr_average

Tag: V00-03-71
2016-06-10 Christopher O'Grady
- Add DdlDetector types for XCS-BEAMMON-01 and EOrbits BLD.

Tag: V00-03-70
2016-06-10 Christopher O'Grady
- Add new TDCDetector for acqiris TDC

Tag: V00-03-69
2016-06-09 Mikhail S. Dubrovin
- PyDetectorAccess - hide print statements under control of pbits

Tag: V00-03-68
2016-05-20 Mikhail S. Dubrovin
- Code refactoring:
	- move GlobalUtils.table_from_cspad_ndarr method to pyimgalgos
	- update ex_ndarray_from_image.py

Tag: V00-03-67
2016-05-19 Mikhail S. Dubrovin
- AreaDetector - add methods coords_xy, coords_xyz, image_xaxis, image_yaxis, update ex_all_dets.py (PSAS-139)
M       AreaDetector.py
M       PyDetectorAccess.py
M       src/PyDetectorAccess.py

Tag: V00-03-66
2016-05-18 Mikhail S. Dubrovin
- correct comments for word "bond"

Tag: V00-03-65
2016-05-18 Mikhail S. Dubrovin
- AreaDetector - add methods mask_edges, mask_neighbors (PSAS-139)

Tag: V00-03-64
2016-05-17 Mikhail S. Dubrovin
- add mask of unbonded pixel with eight neighbors
M       AreaDetector.py
M       PyDetectorAccess.py

Tag: V00-03-63
2016-05-17 Mikhail S. Dubrovin
- det_ndarr_raw_proc - common mode parameters tuning for pnccd

Tag: V00-03-62
2016-05-16 Christopher O'Grady
- Try to clarify doc-strings related to masks

Tag: V00-03-61
2016-05-16 Mikhail S. Dubrovin
- det_ndarr_raw_proc - add evaluation of common mode parameters for a few detectors (PSAS-139)
                     - fix exaluation of hot pixels for pixel_status

Tag: V00-03-60
2016-05-12 Mikhail S. Dubrovin
- det_ndarr_raw_proc - average data in two stages non-gated and gated (PSAS-139)

Tag: V00-03-59
2016-05-02 Mikhail S. Dubrovin
- det_ndarr_average - add option -a to control image processing algorithms before averaging.

Tag: V00-03-58
2016-04-29 Christopher O'Grady and Dan Damiani
- Added Dan's code for new USDUSB detector and code for retrieving
  cspad2x2 gain maps.

Tag: V00-03-57
2016-04-25 Mikhail S. Dubrovin
- det_ndarr_raw_proc - use det.save_asdaq in stead of save_txtnda

Tag: V00-03-56
2016-04-22 Christopher O'Grady
- add OceanDetector to support oceanoptics spectrometer

Tag: V00-03-55
2016-04-20 TJ Lane and Christopher O'Grady
- add Generic1DDetector and subclassed GenericWFDetector to provide
  user-interface to new Generic1D datatype.

Tag: V00-03-54
2016-04-16 Mikhail S. Dubrovin
- modify geometry-def-epix100a.data to get default det.image() orientation like in raw data.

Tag: V00-03-53
2016-04-13 Christopher O'Grady
- Change two MEC BLD detectors to return Ipimb types, not DDL

Tag: V00-03-52
2016-03-28 TJ Lane and Christopher O'Grady
- Added unit tests for Detector module

Tag: V00-03-51
2016-03-28 Christopher O'Grady
- Restore Mikhail's sphinx documentation

Tag: V00-03-50
2016-03-26 TJ Lane
- PyDetector - fix DetInfo from raising when passed Epics name w/colon
- EpicsDetector - added simple __main__

Tag: V00-03-49
2016-03-25 Mikhail S. Dubrovin
- PyDetectorAccess - add methods ndarray_from_image and default_geometry, update ex_all_dets.py
- AreaDetector - add method ndarray_from_image and its test ex_ndarray_from_image
- add examples/ex_ndarray_from_image.py data/geometry-def-epix100a.data

Tag: V00-03-48
2016-03-24 Mikhail S. Dubrovin
- AreaDetector - update comments for doc string.

Tag: V00-03-47
2016-03-22 Christopher O'Grady
- fix bug in exception

Tag: V00-03-46
2016-03-21 Christopher O'Grady and TJ Lane
- update doc strings

Tag: V00-03-45
2016-03-17 Mikhail S. Dubrovin
- det_ndarr_raw_proc - fix output file name substitution
- add parameter "addmetad" to save_txt, save_txtnda, save_txtdaq methods. Do not save metadata for CSPAD and CSPAD2x2.
- det_ndarr_average - change default parameters for plotim=False, verbose=False, events=10000000

Tag: V00-03-44
2016-03-15 Mikhail S. Dubrovin
- AreaDetector._shaped_array_ - exclude a bunch of detectors from re-shaping based on calib parameters (PSAS-139)

Tag: V00-03-43
2016-03-15 Christopher O'Grady
- add "name" attribute to detector so users can query the full-name of a detector

Tag: V00-03-42
2016-03-07 Mikhail S. Dubrovin
- app/det_ndarr_average - save max file w/o header for cspad2x2
- app/det_ndarr_raw_proc - make configurable output file names for calibman compatability
- add app/event_keys - for calibman

Tag: V00-03-41
2016-03-05 Mikhail S. Dubrovin
- det_ndarr_average - use det.save_txtnda and det.save_asdaq

Tag: V00-03-40
2016-02-25 Mikhail S. Dubrovin
- exteld det_ndarr_raw_proc for case of many sources

Tag: V00-03-39
2016-02-24 Mikhail S. Dubrovin
- add AreaDetector.save_asdaq, update examples, app/det_ndarr_raw_proc (PSAS-139)

Tag: V00-03-38
2016-02-22 Mikhail S. Dubrovin
- AreaDetector.py, PyDetectorAccess.py - add methods save_txtnda, load_txtnda (PSAS-139)
- add ex_save_load_nda.py, update ex_all_dets.py

Tag: V00-03-37
2016-02-19 Mikhail S. Dubrovin
- in PyDetectorAccess.py and AreaDetector.py add method point_indexes.
- add ex_andor3d_config.py, update ex_all_dets.py

Tag: V00-03-36
2016-02-12 Mikhail S. Dubrovin
- PyDetectorAccess.raw_data_cspad2x2 - hide configuration wornings under pbits (PSAS-139)

Tag: V00-03-35
2016-02-11 Christopher O'Grady
- Remove print statement from ControlDataDetector

Tag: V00-03-34
2016-02-11 Mikhail S. Dubrovin
- PyDetectorAccess - update raw_data_andor, raw_data_cspad2x2 - return data even for roiMask=1 (PSAS-139)
- AreaDetector - do not reshape andor3d ndarray from data

Tag: V00-03-33
2016-02-09 Mikhail S. Dubrovin
- add ex_andor3d.py

Tag: V00-03-32
2016-02-08 Mikhail S. Dubrovin
- add support for Andor3d (PSAS-139)
    - PyDataAccess.py - add get_andor_config_object, get_andor_data_object
    - PyDetectorAccess.py - update raw_data_andor, raw_data_pnccd, ex_all_dets.py, GlobalUtils.py
    - DetectorTypes.py - add DualAndor

Tag: V00-03-31
2016-02-08 Mikhail S. Dubrovin
- AreaDetector.py - in image() check if nda is None before nda = two2x1ToData2x2(nda) (PSAS-139)

Tag: V00-03-30
2016-01-29 Christopher O'Grady
- Add eventCodes method to evr

Tag: V00-03-29
2016-01-28 Mikhail S. Dubrovin
- add examples/ex_save_mec_cspad*_imges_in_tiff.py (PSAS-211)

Tag: V00-03-28
2016-01-27 Mikhail S. Dubrovin
- AreaDetector.py - use mask_comb in stead of status_as_mask, swap mbits bits 1 and 2 for status and calib (PSAS-139)

Tag: V00-03-27
2016-01-26 Mikhail S. Dubrovin
- AreaDetector.py - improve raw, add mask_comb, use mask_comb in calib, add ex_cspad2x2_mask_mec.py (PSAS-139)

Tag: V00-03-26
2016-01-22 Mikhail S. Dubrovin
- NDArrProducerStore::Create
	- add support for QUARTZ4A150, RAYONIX, FCCD as Camera
	- do not throw exception if dettype is unknown, return NULL pointer
- DetectorAccess.cpp - in methods like data_uint16_2 return empty ndarray if m_nda_prod == NULL

Tag: V00-03-25
2016-01-21 Mikhail S. Dubrovin
- AreaDetector.py - in status_as_mask do not re-shape cspad2x2 arr, it is already (2,185,388) from status()

Tag: V00-03-24
2016-01-20 Mikhail S. Dubrovin
- AreaDetector.py - in calib change order of corrections; 1) common mode, 2) mask from status (PSAS-139)

Tag: V00-03-23
2016-01-20 Mikhail S. Dubrovin
- AreaDetector.py - fix return from status_as_mask, ex_all_dets.py - update example for det.mask

Tag: V00-03-22
2016-01-15 TJ Lane
- Fix issue where aliases were not correctly mapped for non-AreaDetectors

Tag: V00-03-21
2016-01-07 TJ Lane
- Fix typo

Tag: V00-03-20
2016-01-07 TJ Lane
- Added ConfigDataDetector type

Tag: V00-03-19
2016-01-07 Mikhail S. Dubrovin
- PyDetectorAccess.py - fix issue with initialization of self.mbits in constructor (PSAS-139)

Tag: V00-03-18
2016-01-06 Christopher O'Grady
- Refactor the detector factory so people can query the detector
  type for a particular source name.  Add IpimbDetector to DetectorTypes.py
  (for non-bld detectors)

Tag: V00-03-17
2016-01-05 Christopher O'Grady
- Fix EpicsDetector import

Tag: V00-03-16
2015-12-18 TJ Lane
- Added IpimbDetector
- Added explicit list of BldInfo detector types
- modified DdlDetector to have .get() instead of __call__()

Tag: V00-03-15
2015-12-18 Mikhail S. Dubrovin
- PyDetectorAccess.py - add local caching for coords_x,y,z, areas, self.mask_geo, self.pixel_size (PSAS-139)
- add examples/test_geo_time.py

Tag: V00-03-14
2015-12-15 Mikhail S. Dubrovin
- AreaDetector.py add returning geometry object method, add ex_cspad_quads_data.py (PSAS-139)

Tag: V00-03-13
2015-12-14 Mikhail S. Dubrovin
- app/det_ndarr_average - evaluate and save ndarray for max value, 
- ex_all_dets.py - add examples for non-complete data of MecTragetChamber
- PyDataAccess.py - add support for Epix.ElementV3 and Epix.Config100aV2 (PSAS-147)

Tag: V00-03-12
2015-12-09 Mikhail S. Dubrovin
- PyDetectorAccess.raw_data_cspad - fix cspad ndarray reconstruction in case of missing quads, like in MecTargetChamber.0:Cspad.0 (PSAS-139)

Tag: V00-03-11
2015-12-09 Mikhail S. Dubrovin
- in PyDetectorAccess.py, AreaDetector.py rename methods gain_map to gain_mask, inverse results for low/high gain pixels (PSAS-139)

Tag: V00-03-10
2015-12-08 Mikhail S. Dubrovin
- PyDetectorAccess.py, AreaDetector.py - add gain_map evaluation method using configuration (PSAS-139)
- add examples ex_cspad_gain_map.py, expyda_cspad_gain_map.py

Tag: V00-03-09
2015-12-04 Mikhail S. Dubrovin
- PyDataAccess, PyDetectorAccess.py, ex_new_dets - add support for Fccd, Timepix, Fli, Pimax (PSAS-139)

Tag: V00-03-08
2015-12-03 Mikhail S. Dubrovin
- add Igor's script app/find_runs_for_data_type
- add data/copy_part_of_xtc_file.cfg
- DetectorAccess - fix memory leak issue (PSAS-139)

Tag: V00-03-07
2015-11-17 Mikhail S. Dubrovin
- update documentation for AreaDetector, WFDetector, PyDetector

Tag: V00-03-06
2015-11-16 Mikhail S. Dubrovin
- PyDetector - restore and update documentation for sphinx, restore optional test, which were deleted/broken in rev.10938

Tag: V00-03-05
2015-11-13 yoon82 - did something in rev.10977 but did not leave any comments here (M.D.)
	- actually in PyDetector.py portion of code is moved in methods isAreaDetector, isEvrDetector, isWFDetector

Tag: V00-03-04
2015-11-11 Christopher O'Grady
Update detector_factory documentation with Mikhail suggestions.

Tag: V00-03-03
2015-11-11 Mikhail S. Dubrovin
- Update examples/ex_nda_average.py - evaluate maximal along with average

Tag: V00-03-02
2015-11-09 Christopher O'Grady
Update detector_factory documentation.  Clean up GlobalUtils
(alot of this code was moved to PSCalib).

Tag: V00-03-01
2015-11-09 Christopher O'Grady
Make remaining python in examples/ directory work.

Tag: V00-03-00
2015-11-09 TJ Lane
- PyDetector.py: detector_factory() functional, chooses correct PyDetector
from string
- New detectors: DdlDetector.py, EvrDetector.py, EpicsDetector.py and the Bld
(uses DdlDetector)
- No longer accept psana.Source in calls to psana.Detector (v00-03)

Tag: V00-02-05
2015-10-29 Mikhail S. Dubrovin
- AreaDetector.py and PyDetectorAccess.py - in methods indexes_x/y(...) and image(...) add parameter do_update=False (PSAS-139)

Tag: V00-02-04
2015-10-27 Mikhail S. Dubrovin
- PyDetectorAccess.py - improve pixel index arrays caching, update for new run (PSAS-139)

Tag: V00-02-03
2015-10-26 Mikhail S. Dubrovin
- PyDetectorAccess.py - apply cashing of index arrays in indexes_x/y(...) and image(...)
	previously it was done in PSCalib.GeometryAccess after searching of the top object, that takes time (PSAS-139)

Tag: V00-02-02
2015-10-26 Mikhail S. Dubrovin
- AreaDetector.py add protection in image(); return None if det.calib() is None (PSAS-139)

Tag: V00-02-01
2015-10-16 Mikhail S. Dubrovin
- split PyDetector.py in to AreaDetector.py and WFDetector.py, convert PyDetector.py to factory-class (PSAS-139)
- add ex_evt_keys.py, ex_time_fiducials.py

Tag: V00-01-13
2015-10-15 Mikhail S. Dubrovin
- add examples ex_time_fiducials.py, ex_evt_keys.py

Tag: V00-01-12
2015-10-14 Mikhail S. Dubrovin
- Fix crash if detector source is missing in data (PSAS-139)
  - PyDetector.py in _nda_or_none_ - return None if nda is None

Tag: V00-01-11
2015-10-14 Mikhail S. Dubrovin
- Add support for Rayonix (PSAS-139)

Tag: V00-01-10
2015-10-06 Mikhail S. Dubrovin
- Add support for Quartz4A150 (PSAS-139)
  in PyDataAccess.py add get_quartz_data_object(..), get_quartz_config_object(..)
  in PyDetectorAccess.py add QUARTZ4A150 in raw_data(...)
  add ex_quartz.py, update ex_all_dets.py

Tag: V00-01-09
2015-10-01 Christopher O'Grady
- Fix error in autogenerated documentation introduced in V00-01-07:
  change "import _psana" back to "import psana".

Tag: V00-01-08
2015-09-30 David Schneider
- change an abort() call to throw exception to keep user ipython session running

Tag: V00-01-07
2015-09-25 TJ Lane
- Changed import psana to import _psana to break circular dependency in psana
- Tested change in ex_all_dets.py

Tag: V00-01-06
2015-09-23 Mikhail S. Dubrovin
- in PyDetector.py (python interface only) and PyDetectorAccess.py (PSAS-139)
  - add move_geo, tilt_geo, indexes_xy
  - indexes_x, indexes_y, indexes_xy, and image add parameters pix_scale_size_um=None, xy0_off_pix=None

Tag: V00-01-05
2015-09-18 Mikhail S. Dubrovin
- in PyDetector.py - accept source as a string (PSAS-139)

Tag: V00-01-04
2015-09-18 Mikhail S. Dubrovin
- Add support for Imp (PSAS-139)
- in PyDetector.py add set_correct_acqiris_time(...), set_calib_imp(...), __call__(...), update doc
- in PyDetectorAccess.py add raw_data_imp(...), set_calib_imp(...)
- in PyDataAccess.py add get_imp_data_object(...) and get_imp_config_object(...)
- examples/ex_imp.py

Tag: V00-01-03
2015-09-15 Mikhail S. Dubrovin
- PyDetector.set_source fix type to psana.Source, add ex_cspad_alias.py, ex_pnccd_ts.py (PSAS-139)

Tag: V00-01-02
2015-09-11 Mikhail S. Dubrovin
- multiple changes (PSAS-139)
- DetectorAccess - add setCModPars
- PyDetector.py - set custom common mode parameters, return cspad2x2 arrays with shape=(2,185,388) (PSAS-139)
- pyext/pyDetector.cpp - add set_cmod_pars
- examples/ex_all_dets.py
- examples/ex_acqiris.py
- update examples

Tag: V00-01-01
2015-09-09 Mikhail S. Dubrovin
- multiple changes (PSAS-139)
	- add methods (runnum) in addition to (evt,env)
	- add python interface for geometry, intensity calibration constants
	- add switch between C++/Python interfaces
- update/add examples in examples/*

2015-08-24 Mikhail S. Dubrovin
- Add in GlobalUtils add string_from_source_v2 and change PyDetector.py to accept aliases (PSAS-139)

==============

Tag: V00-00-12
2015-08-11 Mikhail S. Dubrovin
- add app/det_ndarr_average and examples/ex_nda_average.py (PSAS-139)

Tag: V00-00-11
2015-08-05 Mikhail S. Dubrovin
- minor extension of examples.

Tag: V00-00-10
2015-07-21 Mikhail S. Dubrovin
- PyDetector.py - add protection and warnings for missing data/pedestal/mask in calib(.) (PSAS-139)
- add ex_cspad2x2_ts.py - access to data using timestamp.

Tag: V00-00-09
2015-07-14 Mikhail S. Dubrovin
- PyDetector.py - change interface to mask(.) as users requested (PSAS-139)

Tag: V00-00-08
2015-07-13 Mikhail S. Dubrovin
- Re-implement mask method to generate combined mask array, rename methods by user's request (PSAS-139)
  - DetectorAccess, pyext/pyDetector.cpp add parameter mbits in method pixel_mask_geo
  - PyDetector.py
	- rename method raw_data -> raw
	- rename method calib_data -> calib
	- rename method mask -> mask_calib
	- rename method print_members -> print_attributes
	- add parameter mbits in method mask_geo
	- add method mask(.)
	- adjust sphinx doc.
  - Add examples/ex_mask.py
  - Adjust other examples for renamed methods.


Tag: V00-00-07
2015-06-22 Mikhail S. Dubrovin
- Add implementation and access to Acqiris through PyDetector.raw_data() (PSAS-139)
  - PyDataAccess.py add get_acqiris_data_object(.) and get_acqiris_config_object(.)
  - PyDetector.py add documentation for Acqiris
  - PyDetectorAccess.py add implementation raw_data_acqiris(.), set_correct_acqiris_time(.), raw_data(.)
  - add examples/ex_acqiris.py

Tag: V00-00-06
2015-06-12 Mikhail S. Dubrovin
- fix sphinx documentation, cosmetic changes.
- set SConscript to generate documentation

Tag: V00-00-05
2015-06-11 Mikhail S. Dubrovin
- extensive development (PSAS-139)
	- add C++/python code for common mode correction
	- add calib_data(...) method to apply 3 corrections (pedestals, pixel status mask, common mode)
	- add protection in many places: return None if returning object is non-available
	- add PyDetectorAccess.py - get all raw data directly from python data objects (it is faster then using boost/python)
        - add PyDataAccess.py - global methods to access data objects in case of multiple versions.
	- add examples/ex_cspad.py - for test purpose (may be removed later)
	- in PyDetector - add beta-version of sphinx documentation

Tag: V00-00-04
2015-06-02 Mikhail S. Dubrovin
- update ChangeLog

Tag: V00-00-03
2015-06-02 Mikhail S. Dubrovin
- update examples, PyDetector returns None if ndarray size is zero (PSAS-139)

Tag: V00-00-02
2015-05-22 Mikhail S. Dubrovin
- DetectorAccess - add methods ndim(.), size(.), shape(.), status(.). (PSAS-139)
- src/PyDetector.py - return None if calibration parameters are not loaded,
	- add methods ndim(.), size(.), shape(.), status(.), shaped_array(.), return shaped ndarray.
- pyext/pyDetector.cpp - support wrapper for new methods.
- GlobalUtils.py - add enumerated parameters to support CALIB_TYPE and STATUS
- examples/ex_cspad.py -> ex_all_dets.py - switch between derectors by input integer parameter.

2015-05-21 Mikhail S. Dubrovin
- GlobalUtils.py - add enumerated detector types.
- src/DetectorAccess.cpp - make sure that calib parameters loaded before ndarray size is reqested.
- re-name ex_cspad.py -> ex_all_dets.py and update.

2015-05-20 Mikhail S. Dubrovin
- rename examples
- change names and propagation of parameters in PyDetector.py
- add GlobalUtils.py, PyDetectorAccess.py

2015-05-19 Mikhail S. Dubrovin
- Fixed problems with imports.

Tag: V00-00-01
2015-05-18 Mikhail S. Dubrovin
- Package pytopsana was re-named to Detector (PSAS-139)

#------------------------------
Chris & Ankush stuff:
addpkg psana_python HEAD    (boost converters)
addpkg -u pyAreaDet
#------------------------------
